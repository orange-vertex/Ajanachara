### Ajanachara
A program for visibility graph analysis.

---
#### Welcome to the world of visibility graph analysis!
For more information about visibility graph analysis in general you may have a look at the Space Syntax web site or at a nice introduction to visibility graph analysis from the Bartlett School, University College London.

#### General usage
Ajanachara allows to generate, load, save, and of course to analyze visibility graphs based on 3D models. All these functions are available over the menu bar and should be widely self explanatory. The status bar at the lower window border provides additional information.
The central main part of the window offers a camera view on the models and the visualization of the the graph. Basic display parameters can be influenced via the "View" menu. The camera position is adjustable by pressing the Cursor and the PageUp/ PageDown keys. Additionally panning and zooming can be performed using the middle mouse button and the scroll wheel. For adjusting the camera it could be necessary to set the keyboard focus to the camera window by clicking into it using the mouse.
#### How to generate new graphs
This basic operation is quite easy but needs some preparation. Two different VRML97, 3ds, or x3d files of the spaces to be analyzed are required. The first one has to contain all the floor surfaces, while the second one must provide the boundary (i.e. wall) geometry. The geometry loaders support only a subset of x3d, VRML, and 3ds, for example VRML geometries have to be completely described by IndexedFaceSets. But most 3D modellers (e.g., 3D studio max or formZ) have a modus to exclusively export these nodes, so it should be possible to match this requirement.
After starting the generation of a new graph by choosing File->New from the menu, the first step is to select the floor geometry file. Then the graph layout can be adjusted by changing the mesh size and position by editing the displayed initial values in a popup dialog. After clicking OK, ajanachara shows a preview on cells that will be part of the graph (indicated by a green color) and the ones that will be excluded (displayed in red). This can be individually adjusted by clicking on them with the mouse. When you are finally content with this, "Next Step" from the menu has to be clicked. Now the boundary geometry has to be selected and after that the actual graph computation commences. Depending on the number of vertices and on the complexity of the boundary geometry, this may take quite a long time. A bar in the lower right corner of the window provides information about the progress. If necessary, the computation can be aborted by clicking the small abort button next to it. Please do not forget to save (File->Save as) the graph before exiting, because ajanachara directly terminates when an exit command is given and all unsaved data will be lost.
#### Visibility graph file format
The file format used by ajanachara to store computed graphs is a fairly optimized compromise between processing and loading speed, simplicity, versatility, and disk usage. As indicated by the suffix ".vgz", visibility graph files are gzipped plain ASCII text with lines terminated by single newline characters. After decompression this format is human readable and easily importable by other programs. Decompressed vgz files are for example directly loadable by MATLAB or GNU Octave. The first two lines starting with a % contain all the structural information, while each of the following lines represent the edges of one vertex. If you want to manually adjust the graph or write an exporter for another program, please take care of the pattern of bool values and space characters and do not add additional whitespace. This formatting has been fixed in order to be rapidly processed.
#### Technical info
Ajanachara was designed and implemented by [Gerald Franz](gerald.franz@tuebingen.mpg.de) at the [Max Planck Institute for Biological Cybernetics](http://www.kyb.mpg.de/nc/employee/details/gf.html) in Tübingen, Germany. The newest version and the source code are available there. It is partially based on our in-house veLib, the user interface is made using the [FLTK](https://www.fltk.org/) toolkit (version >= 1.1.5). For exporting EPS and PDF, the [GL2PS](http://www.geuz.org/gl2ps/) library is used. The file compression and decompression is done using [zlib](https://zlib.net/). Finally, the VRML interpreter is based in part on the work of the Independent JPEG Group and makes use of [libPNG](http://www.libpng.org/).
Ajanachara is provided under the terms of the [GNU General Public License](Ajanachara/license.html).

© gerald.franz@tuebingen.mpg.de 2006-07-28
